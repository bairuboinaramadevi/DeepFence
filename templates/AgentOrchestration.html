{% extends "MasterHeader.html" %} {% block content %}
<head>
  <title>Spectra - AgentOrchestration</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script type="text/javascript" src="../CDN/jsonform/deps/jquery.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Syncfusion Styles -->
  <link href="https://cdn.syncfusion.com/ej2/material.css" rel="stylesheet" />

  <!-- Syncfusion Scripts -->
  <script src="https://cdn.syncfusion.com/ej2/dist/ej2.min.js"></script>

  <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
  <link href="
    https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.min.css
    " rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <script src="
    https://cdn.jsdelivr.net/npm/sweetalert2@11.7.1/dist/sweetalert2.all.min.js
    "></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
    crossorigin="anonymous"></script>
  <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/xy.js"></script> <!-- Required for XY charts -->
  <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
  <script type="text/javascript" src="static/CDN/scripts/events-library.js"></script>

  <style>
    /* body {
      font: 10pt arial;
    } */

    #mynetwork {
      width: 1500px;
      height: 700px;
      /* border: 1px solid #333333;;
      background-color: lightgray; */
    }

    #flowgraph {
      width: 1400px;
      height: 560px;
      margin-top: -20px !important;
      margin-left: -30px;
      /*border: 1px solid lightgray;
        margin-left: -105px;*/
    }

    #runsChart {
      width: 100%;
      height: 300px;
    }

    /* body {
      font-size: 14px !important;
      font-weight: 400 !important;
      line-height: 1 !important;
      overflow-x: hidden;
    } */

    #footer {
      position: fixed;
      padding: 10px 10px 0px 10px;
      bottom: 0;
      width: 100%;
      /* Height of the footer*/
      height: 40px;
      text-align: center;
      /* background: grey; */
    }

    #navbtn:hover,
    #navbtn:focus,
    #navbtn {
      background-color: #337AB7;
      border: none;
    }

    .navbar-dark .navbar-nav .nav-link {
      color: #f9fafb !important;
    }

    .pagetitle {
      padding: 10px;
      box-shadow: antiquewhite 2px 0 2px;
      background-color: antiquewhite;
      border: 1px solid antiquewhite;
      margin-right: 1px;
      border-radius: 10px;
      width: fit-content;
      font-size: 16px;
      font-family: Malgun Gothic;
    }

    /* #mynetwork {
         
            width: 1800px;
            height: 600px;
            margin-top: 20px !important;
            margin-left: -30px;
        } */

    code {
      font-size: 14px;
      background: #dddddd;
    }

    p {
      max-width: 600px;
    }

    .indented {
      margin-left: 30px;
    }

    .sep {
      height: 1px;
      width: 5%;
      margin-left: 40px;
      background-color: #dddddd;
    }
  </style>
</head>

<body>
  <div class="row">
    <div class="col-md-11"><ul id="breadcrumb"></ul></div>
    <div class="col-md-1"><i class="bi bi-info-circle" style="float: right;
      margin-right: 20px;
      margin-top: 10px;
      font-size: x-large;
      color: deepskyblue;cursor: pointer;" onclick="loadArchitectureModal('AutoAgentPattern.jpg','Autogen Agentic Framework Multi Agent Group Chat')"></i></div>
  </div>

  <div class="container">
    <!-- Config Button -->
    <button id="configBtn" class="btn btn-primary mt-3">
      Manage Agentic Framework Settings
    </button>

    <div class="row">
      <div id="mynetwork"></div>
    </div>
  </div>

  <!-- Modal for displaying amChart -->
  <div class="modal fade" id="chartModal" tabindex="-1" aria-labelledby="chartModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="chartModalLabel">Resource Performance & Self Cost Tracking</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <!-- Tab navigation -->      
          <ul class="nav nav-tabs" id="chartTabs" role="tablist">
            <li class="nav-item" role="presentation">
              <a class="nav-link active" id="tab1-tab" data-bs-toggle="tab" href="#tab1" role="tab" aria-controls="tab1"
                aria-selected="true">GenAI Token Cost Tracking & Prediction</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="tab2-tab" data-bs-toggle="tab" href="#tab2" role="tab" aria-controls="tab2"
                aria-selected="false">RAM & CPUPerformance Tracking</a>
            </li>
            <!-- <li class="nav-item" role="presentation">
              <a class="nav-link" id="tab3-tab" data-bs-toggle="tab" href="#tab3" role="tab" aria-controls="tab3"
                aria-selected="false">RAM Performance Tracking</a>
            </li> -->
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="tab4-tab" data-bs-toggle="tab" href="#tab4" role="tab" aria-controls="tab4"
                aria-selected="false">Agent Timeouts & Alerts</a>
            </li>
          </ul>

          <!-- Tab content -->
          <div class="tab-content" id="chartTabsContent">
            <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="tab1-tab">
              <div id="amChartContainer1" style="width: 100%; height: 400px;"></div>
            </div>
            <div class="tab-pane fade" id="tab2" role="tabpanel" aria-labelledby="tab2-tab">
              <div id="amChartContainer2" style="width: 100%; height: 400px;"></div>
            </div>
            <!-- <div class="tab-pane fade" id="tab3" role="tabpanel" aria-labelledby="tab3-tab">
              <div id="amChartContainer3" style="width: 100%; height: 400px;"></div>
            </div> -->
            <div class="tab-pane fade" id="tab4" role="tabpanel" aria-labelledby="tab4-tab">
              <div id="amChartContainer4" style="width: 100%; height: 400px;"></div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Modal for displaying Syncfusion TreeGrid, TextBox, and Sliders -->
  <div class="modal fade" id="configModal" tabindex="-1" aria-labelledby="configModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="configModalLabel">Agentic Framework Settings</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div class="row">
            <!-- Syncfusion TreeGrid (on the left) -->
            <div class="col-md-6">
              <div id="treeGrid"></div>
            </div>

            <!-- Form elements (TextBox and Sliders) on the right -->
            <div class="col-md-6">
              <label for="configTextBox">Max Cost:</label>
              <input type="text" id="configTextBox" />
              <br><br>

              <label for="slider1">TimeOut: <span id="slider1Value"></span></label>
              <div id="slider1"></div>
              <br><span id="slider1Min">Min: 1</span> | <span id="slider1Max">Max: 60</span>


              <br><br>

              <label for="slider2">CPU:<span id="slider2Value"></span></label>
              <div id="slider2"></div>
              <br><span id="slider1Min">Min: 1</span> | <span id="slider1Max">Max: 50</span>


              <br><br>

              <label for="slider3">RAM:<span id="slider3Value"></span></label>
              <div id="slider3"></div>
              <br><span id="slider1Min">Min: 1</span> | <span id="slider1Max">Max: 16</span>


            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" id="saveBtn" class="btn btn-primary">Save Changes</button>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="../CDN/jsonform/deps/jquery.min.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

  <script type="text/javascript">
     var items = [
      {
        iconCss: 'e-icons e-home',
        url: "/",
      },
      {
        id: 'breadcrumb_spectra',
        text: "Spectra",
        url: "/",

      },
      {
        id: 'breadcrumb_agent_orchestration',
        text: "Agent Orchestration",
        url: "/Agent Orchestration",
      }
    ];

    new ej.navigations.Breadcrumb({
      items: items,
      enableNavigation: true
    }, '#breadcrumb');
    $("#navheadertext")[0].innerText = "Spectra - Agent Orchestration"
    var treegridObj;
    var sampleData = [

      {
        id: 1, shape: "image", label: "Ingestion", image: DIR + "agent.png", imagePadding: 10, group: "A",
        subtasks: [
          { id: 2, shape: "circularImage", label: "PDF", image: DIR + "agent.png", imagePadding: 10, group: "A" },
          { id: 3, shape: "circularImage", label: "Video", image: DIR + "agent.png", imagePadding: 10, group: "A" },
          { id: 4, shape: "circularImage", label: "Audio", image: DIR + "agent.png", imagePadding: 10, group: "A" },
          { id: 5, shape: "circularImage", label: "Image", image: DIR + "agent.png", imagePadding: 10, group: "A" },
          { id: 6, shape: "circularImage", label: "JSON", image: DIR + "agent.png", imagePadding: 10, group: "A" },
          { id: 7, shape: "circularImage", label: "CSV", image: DIR + "agent.png", imagePadding: 10, group: "A" },
          { id: 8, shape: "circularImage", label: "XML", image: DIR + "agent.png", imagePadding: 10, group: "A" },
        ]
      },
      {
        id: 21, shape: "image", label: "Cleansing", image: DIR + "agent.png", imagePadding: 10, group: "B",
        subtasks: [
          { id: 22, shape: "circularImage", label: "Stats", image: DIR + "agent.png", imagePadding: 10, group: "B" },
          { id: 23, shape: "circularImage", label: "Numbers", image: DIR + "agent.png", imagePadding: 10, group: "B" },
          { id: 24, shape: "circularImage", label: "Domain", image: DIR + "agent.png", imagePadding: 10, group: "B" },
          { id: 25, shape: "circularImage", label: "Normalize", image: DIR + "agent.png", imagePadding: 10, group: "B" },
          { id: 26, shape: "circularImage", label: "Language", image: DIR + "agent.png", imagePadding: 10, group: "B" },
        ]
      },
      {
        id: 41, shape: "image", label: "Data Quality", image: DIR + "agent.png", imagePadding: 10, group: "C",
        subtasks: [
          { id: 42, shape: "circularImage", label: "Values", image: DIR + "agent.png", imagePadding: 10, group: "C" },
          { id: 43, shape: "circularImage", label: "Compliance", image: DIR + "agent.png", imagePadding: 10, group: "C" },
          { id: 44, shape: "circularImage", label: "Datatype", image: DIR + "agent.png", imagePadding: 10, group: "C" },
          { id: 45, shape: "circularImage", label: "Domain", image: DIR + "agent.png", imagePadding: 10, group: "C" },
        ]
      },
      {
        id: 61, shape: "image", label: "Business Rules", image: DIR + "agent.png", imagePadding: 10, group: "D",
        subtasks: [
          { id: 62, shape: "circularImage", label: "Transforms", image: DIR + "agent.png", imagePadding: 10, group: "D" },
          { id: 63, shape: "circularImage", label: "Mastering", image: DIR + "agent.png", imagePadding: 10, group: "D" },
          { id: 64, shape: "circularImage", label: "Notebooks", image: DIR + "agent.png", imagePadding: 10, group: "D" },
          { id: 65, shape: "circularImage", label: "Factories", image: DIR + "agent.png", imagePadding: 10, group: "D" },
          // { id: 66, shape: "circularImage",label:"Consumption", image: DIR + "agent.png", imagePadding: 10,group:"C" },
        ]
      },
      {
        id: 81, shape: "image", label: "Consumption", image: DIR + "agent.png", imagePadding: 10, group: "E",
        subtasks: [
          { id: 82, shape: "circularImage", label: "SQLBot", image: DIR + "agent.png", imagePadding: 10, group: "E" },
          { id: 83, shape: "circularImage", label: "KnowledgeBot", image: DIR + "agent.png", imagePadding: 10, group: "E" },
          { id: 84, shape: "circularImage", label: "ResolutionBot", image: DIR + "agent.png", imagePadding: 10, group: "E" },
        ]
      },
      {
        id: 101, shape: "image", label: "QueryBot", image: DIR + "agent.png", imagePadding: 10, group: "F",
        subtasks: [
          { id: 102, shape: "circularImage", label: "Compliance", image: DIR + "agent.png", imagePadding: 10, group: "F" },
          { id: 103, shape: "circularImage", label: "Responsible", image: DIR + "agent.png", imagePadding: 10, group: "F" },
          { id: 104, shape: "circularImage", label: "Masking", image: DIR + "agent.png", imagePadding: 10, group: "F" },
          { id: 105, shape: "circularImage", label: "RAG", image: DIR + "agent.png", imagePadding: 10, group: "F" },
        ]
      },
      {
        id: 121, shape: "image", label: "CodeOps", image: DIR + "agent.png", imagePadding: 10, group: "G",
        subtasks: [
          { id: 122, shape: "circularImage", label: "Pylint", image: DIR + "agent.png", imagePadding: 10, group: "G" },
          { id: 123, shape: "circularImage", label: "Bandit", image: DIR + "agent.png", imagePadding: 10, group: "G" },
          { id: 124, shape: "circularImage", label: "Prospector", image: DIR + "agent.png", imagePadding: 10, group: "G" },
          { id: 125, shape: "circularImage", label: "TimeIt", image: DIR + "agent.png", imagePadding: 10, group: "G" },
        ]
      },
      {
        id: 141, shape: "image", label: "TicketOps", image: DIR + "agent.png", imagePadding: 10, group: "H",
        subtasks: [
          { id: 142, shape: "circularImage", label: "IR", image: DIR + "agent.png", imagePadding: 10, group: "H" },
          { id: 143, shape: "circularImage", label: "Summarize", image: DIR + "agent.png", imagePadding: 10, group: "H" },
          { id: 144, shape: "circularImage", label: "Respond", image: DIR + "agent.png", imagePadding: 10, group: "H" },
          { id: 145, shape: "circularImage", label: "Generate-TSG", image: DIR + "agent.png", imagePadding: 10, group: "H" },
        ]
      },
      {
        id: 161, shape: "image", label: "ITOps", image: DIR + "agent.png", imagePadding: 10, group: "I",
        subtasks: [
          { id: 162, shape: "circularImage", label: "Restart", image: DIR + "agent.png", imagePadding: 10, group: "I" },
          { id: 163, shape: "circularImage", label: "Retry", image: DIR + "agent.png", imagePadding: 10, group: "I" },
          { id: 164, shape: "circularImage", label: "Alert/Reset", image: DIR + "agent.png", imagePadding: 10, group: "I" },
        ]
      }

    ];

    treegridObj = new ej.treegrid.TreeGrid({
      dataSource: sampleData,
      childMapping: 'subtasks',
      treeColumnIndex: 1,
      columns: [
        { field: 'id', headerText: 'ID', width: 70, textAlign: 'Right' },
        { field: 'label', headerText: 'Category', width: 200, textAlign: 'Left' },
      ],
      height: 380
    });
    treegridObj.appendTo('#treeGrid');
    // Initialize Syncfusion TextBox
    var textBox = new ej.inputs.TextBox({
      // placeholder: 'Max Cost'
    });
    textBox.appendTo('#configTextBox');


    // Initialize Syncfusion Slider 1
    var slider1 = new ej.inputs.Slider({
      min: 1,
      max: 60,
      value: 30,
      step: 1,

      type: 'MinRange',
      change: function (args) {
        document.getElementById('slider1Value').textContent = args.value;
      }
    });
    slider1.appendTo('#slider1');

    // Initialize Syncfusion Slider 2
    var slider2 = new ej.inputs.Slider({
      min: 1,
      max: 50,
      value: 25,
      step: 1,
      type: 'MinRange',
      change: function (args) {
        document.getElementById('slider2Value').textContent = args.value;
      }
    });
    slider2.appendTo('#slider2');

    // Initialize Syncfusion Slider 3
    var slider3 = new ej.inputs.Slider({
      min: 1,
      max: 16,
      value: 8,
      step: 1,
      type: 'MinRange',
      change: function (args) {
        document.getElementById('slider3Value').textContent = args.value;
      }
    });
    slider3.appendTo('#slider3');

    // Button click to open modal
    document.getElementById("configBtn").addEventListener("click", function () {
      $('#configModal').modal('show');
      insertTelemetry(EVENT_SOURCE_SPECTRA, AGENT_ORCHESTRATION_LOAD_SETTINGS, "Settings Loaded successfully", JSON.stringify({ "Settings": "Loaded"  }));

    });
    document.getElementById("saveBtn").addEventListener("click", function() {
      $('#configModal').modal('hide');// Destructuring
    insertTelemetry(EVENT_SOURCE_SPECTRA, AGENT_ORCHESTRATION_UPDATE_SETTINGS, "Settings Updated successfully", JSON.stringify({ "Settings": "Updated"  }));
});

    var DIR = "img/soft-scraps-icons/";

    var nodes = null;
    var edges = null;
    var network = null;

    // Called when the Visualization API is loaded.
    function draw() {
      // create people.
      // value corresponds with the age of the person
      var DIR = "static/CDN/images/";
      nodes = [
        { id: 1, shape: "image", label: "Ingestion", image: DIR + "agent.png", imagePadding: 10, group: "A" },
        { id: 2, shape: "circularImage", label: "PDF", image: DIR + "agent.png", imagePadding: 10, group: "A" },
        { id: 3, shape: "circularImage", label: "Video", image: DIR + "agent.png", imagePadding: 10, group: "A" },
        { id: 4, shape: "circularImage", label: "Audio", image: DIR + "agent.png", imagePadding: 10, group: "A" },
        { id: 5, shape: "circularImage", label: "Image", image: DIR + "agent.png", imagePadding: 10, group: "A" },
        { id: 6, shape: "circularImage", label: "JSON", image: DIR + "agent.png", imagePadding: 10, group: "A" },
        { id: 7, shape: "circularImage", label: "CSV", image: DIR + "agent.png", imagePadding: 10, group: "A" },
        { id: 8, shape: "circularImage", label: "XML", image: DIR + "agent.png", imagePadding: 10, group: "A" },

        { id: 21, shape: "image", label: "Cleansing", image: DIR + "agent.png", imagePadding: 10, group: "B" },
        { id: 22, shape: "circularImage", label: "Stats", image: DIR + "agent.png", imagePadding: 10, group: "B" },
        { id: 23, shape: "circularImage", label: "Numbers", image: DIR + "agent.png", imagePadding: 10, group: "B" },
        { id: 24, shape: "circularImage", label: "Domain", image: DIR + "agent.png", imagePadding: 10, group: "B" },
        { id: 25, shape: "circularImage", label: "Normalize", image: DIR + "agent.png", imagePadding: 10, group: "B" },
        { id: 26, shape: "circularImage", label: "Language", image: DIR + "agent.png", imagePadding: 10, group: "B" },

        { id: 41, shape: "image", label: "Data Quality", image: DIR + "agent.png", imagePadding: 10, group: "C" },
        { id: 42, shape: "circularImage", label: "Values", image: DIR + "agent.png", imagePadding: 10, group: "C" },
        { id: 43, shape: "circularImage", label: "Compliance", image: DIR + "agent.png", imagePadding: 10, group: "C" },
        { id: 44, shape: "circularImage", label: "Datatype", image: DIR + "agent.png", imagePadding: 10, group: "C" },
        { id: 45, shape: "circularImage", label: "Domain", image: DIR + "agent.png", imagePadding: 10, group: "C" },

        { id: 61, shape: "image", label: "Business Rules", image: DIR + "agent.png", imagePadding: 10, group: "D" },
        { id: 62, shape: "circularImage", label: "Transforms", image: DIR + "agent.png", imagePadding: 10, group: "D" },
        { id: 63, shape: "circularImage", label: "Mastering", image: DIR + "agent.png", imagePadding: 10, group: "D" },
        { id: 64, shape: "circularImage", label: "Notebooks", image: DIR + "agent.png", imagePadding: 10, group: "D" },
        { id: 65, shape: "circularImage", label: "Factories", image: DIR + "agent.png", imagePadding: 10, group: "D" },
        // { id: 66, shape: "circularImage",label:"Consumption", image: DIR + "agent.png", imagePadding: 10,group:"C" },

        { id: 81, shape: "image", label: "Consumption", image: DIR + "agent.png", imagePadding: 10, group: "E" },
        { id: 82, shape: "circularImage", label: "SQLBot", image: DIR + "agent.png", imagePadding: 10, group: "E" },
        { id: 83, shape: "circularImage", label: "KnowledgeBot", image: DIR + "agent.png", imagePadding: 10, group: "E" },
        { id: 84, shape: "circularImage", label: "ResolutionBot", image: DIR + "agent.png", imagePadding: 10, group: "E" },

        { id: 101, shape: "image", label: "QueryBot", image: DIR + "agent.png", imagePadding: 10, group: "F" },
        { id: 102, shape: "circularImage", label: "Compliance", image: DIR + "agent.png", imagePadding: 10, group: "F" },
        { id: 103, shape: "circularImage", label: "Responsible", image: DIR + "agent.png", imagePadding: 10, group: "F" },
        { id: 104, shape: "circularImage", label: "Masking", image: DIR + "agent.png", imagePadding: 10, group: "F" },
        { id: 105, shape: "circularImage", label: "RAG", image: DIR + "agent.png", imagePadding: 10, group: "F" },

        { id: 121, shape: "image", label: "CodeOps", image: DIR + "agent.png", imagePadding: 10, group: "G" },
        { id: 122, shape: "circularImage", label: "Pylint", image: DIR + "agent.png", imagePadding: 10, group: "G" },
        { id: 123, shape: "circularImage", label: "Bandit", image: DIR + "agent.png", imagePadding: 10, group: "G" },
        { id: 124, shape: "circularImage", label: "Prospector", image: DIR + "agent.png", imagePadding: 10, group: "G" },
        { id: 125, shape: "circularImage", label: "TimeIt", image: DIR + "agent.png", imagePadding: 10, group: "G" },

        { id: 141, shape: "image", label: "TicketOps", image: DIR + "agent.png", imagePadding: 10, group: "H" },
        { id: 142, shape: "circularImage", label: "IR", image: DIR + "agent.png", imagePadding: 10, group: "H" },
        { id: 143, shape: "circularImage", label: "Summarize", image: DIR + "agent.png", imagePadding: 10, group: "H" },
        { id: 144, shape: "circularImage", label: "Respond", image: DIR + "agent.png", imagePadding: 10, group: "H" },
        { id: 145, shape: "circularImage", label: "Generate-TSG", image: DIR + "agent.png", imagePadding: 10, group: "H" },

        { id: 161, shape: "image", label: "ITOps", image: DIR + "agent.png", imagePadding: 10, group: "I" },
        { id: 162, shape: "circularImage", label: "Restart", image: DIR + "agent.png", imagePadding: 10, group: "I" },
        { id: 163, shape: "circularImage", label: "Retry", image: DIR + "agent.png", imagePadding: 10, group: "I" },
        { id: 164, shape: "circularImage", label: "Alert/Reset", image: DIR + "agent.png", imagePadding: 10, group: "I" },

      ];

      // create connections between people
      // value corresponds with the amount of contact between two people
      edges = [
        { from: 1, to: 2 },
        { from: 1, to: 3 },
        { from: 1, to: 4 },
        { from: 1, to: 5 },
        { from: 1, to: 6 },
        { from: 1, to: 7 },
        { from: 1, to: 8 },

        { from: 1, to: 21 },
        { from: 21, to: 22 },
        { from: 21, to: 23 },
        { from: 21, to: 24 },
        { from: 21, to: 25 },
        { from: 21, to: 26 },

        { from: 21, to: 41 },
        { from: 41, to: 42 },
        { from: 41, to: 43 },
        { from: 41, to: 44 },
        { from: 41, to: 45 },

        { from: 41, to: 61 },
        { from: 61, to: 62 },
        { from: 61, to: 63 },
        { from: 61, to: 64 },
        { from: 61, to: 65 },

        { from: 61, to: 81 },
        { from: 81, to: 82 },
        { from: 81, to: 83 },
        { from: 81, to: 84 },
        { from: 81, to: 85 },

        { from: 81, to: 101 },
        { from: 101, to: 102 },
        { from: 101, to: 103 },
        { from: 101, to: 104 },
        { from: 101, to: 105 },

        { from: 101, to: 121 },
        { from: 121, to: 122 },
        { from: 121, to: 123 },
        { from: 121, to: 124 },
        { from: 121, to: 125 },

        { from: 121, to: 141 },
        { from: 141, to: 142 },
        { from: 141, to: 143 },
        { from: 141, to: 144 },
        { from: 141, to: 145 },

        { from: 141, to: 161 },
        { from: 161, to: 162 },
        { from: 161, to: 163 },
        { from: 161, to: 164 },
      ];

      // create a network
      var container = document.getElementById("mynetwork");
      var data = {
        nodes: nodes,
        edges: edges,

      };

      var options = {
        nodes: {
          // borderWidth: 4,
          size: 30,
          color: {
            // border: "#222222",
            background: "#666666",
          },
          font: { color: "#333333" },
        },
        edges: {
          color: "#333333",
        },
        groups: {
          A: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#406897",
              background: "#6AAFFF",
            },
            font: { color: "#333333", size: 15 },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
          B: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#b55c4e",
              background: "#a84232",
            },
            font: {
              color: "#333333", size: 15
            },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
          C: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#22f26e",
              background: "#058534",
            },
            font: {
              color: "#333333", size: 15
            },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
          D: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#22f26e",
              background: "#de6c10",
            },
            font: {
              color: "#333333", size: 15
            },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
          E: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#22f26e",
              background: "#dbc816",
            },
            font: {
              color: "#333333", size: 15
            },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
          F: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#22f26e",
              background: "#3b30d1",
            },
            font: {
              color: "#333333", size: 15
            },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
          G: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#22f26e",
              background: "#7d7a79",
            },
            font: {
              color: "#333333", size: 15
            },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
          H: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#22f26e",
              background: "#9ed130",
            },
            font: {
              color: "#333333", size: 15
            },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
          I: {
            // borderWidth: 4,
            size: 30,
            color: {
              // border: "#22f26e",
              background: "#8e30d1",
            },
            font: {
              color: "#333333", size: 15
            },
            shapeProperties: {
              useBorderWithImage: true,
            },
          },
        },

      };

      network = new vis.Network(container, data, options);

      // Attach click event to nodes
      network.on("click", function (event) {
        var nodeId = event.nodes[0]; // Get the ID of the clicked node
        if (nodeId) {
          // Show the modal
          $('#chartModal').modal('show');

          // Create the chart for the clicked node
          createAmcharts();
          // createImage();
        }
      });

      // Define the data
      const chartData1 = [
        { "start_time": "2025-01-08 15:00:00", "cost": 6.05200623 },
        { "start_time": "2025-01-08 16:00:00", "cost": 0.0 },
        { "start_time": "2025-01-08 17:00:00", "cost": 0.0 },
        { "start_time": "2025-01-08 18:00:00", "cost": 0.0 },
        { "start_time": "2025-01-08 19:00:00", "cost": 0.0 },
        { "start_time": "2025-01-08 20:00:00", "cost": 0.0 },
        { "start_time": "2025-01-08 21:00:00", "cost": 0.0 },
        { "start_time": "2025-01-08 22:00:00", "cost": 6.05200623 },
        { "start_time": "2025-01-08 23:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 00:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 01:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 02:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 03:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 04:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 05:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 06:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 07:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 08:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 09:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 10:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 11:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 12:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 13:00:00", "cost": 0.0498761 },
        { "start_time": "2025-01-09 14:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 15:00:00", "cost": 0.0 },
        { "start_time": "2025-01-09 16:00:00", "cost": 9.049941500000001 },
        { "start_time": "2025-01-09 17:00:00", "cost": 0.09998867 },
        { "start_time": "2025-01-09 18:00:00", "cost": 16.0006 }
      ];

      const chartData2 = [
        {
          'start_time': '1/8/2025 15: 00', 'timeout': 43
        },
        {
          'start_time': '1/8/2025 16: 00', 'timeout': 47
        },
        {
          'start_time': '1/8/2025 17: 00', 'timeout': 7
        },
        {
          'start_time': '1/8/2025 18: 00', 'timeout': 41
        },
        {
          'start_time': '1/8/2025 19: 00', 'timeout': 40
        },
        {
          'start_time': '1/8/2025 20: 00', 'timeout': 1
        },
        {
          'start_time': '1/8/2025 21: 00', 'timeout': 41
        },
        {
          'start_time': '1/8/2025 22: 00', 'timeout': 7
        },
        {
          'start_time': '1/8/2025 23: 00', 'timeout': 54
        },
        {
          'start_time': '1/9/2025 0: 00', 'timeout': 49
        },
        {
          'start_time': '1/9/2025 1: 00', 'timeout': 59
        },
        {
          'start_time': '1/9/2025 2: 00', 'timeout': 2
        },
        {
          'start_time': '1/9/2025 3: 00', 'timeout': 50
        },
        {
          'start_time': '1/9/2025 4: 00', 'timeout': 15
        },
        {
          'start_time': '1/9/2025 5: 00', 'timeout': 41
        },
        {
          'start_time': '1/9/2025 6: 00', 'timeout': 38
        },
        {
          'start_time': '1/9/2025 7: 00', 'timeout': 55
        },
        {
          'start_time': '1/9/2025 8: 00', 'timeout': 55
        },
        {
          'start_time': '1/9/2025 9: 00', 'timeout': 37
        },
        {
          'start_time': '1/9/2025 10: 00', 'timeout': 29
        },
        {
          'start_time': '1/9/2025 11: 00', 'timeout': 67
        },
        {
          'start_time': '1/9/2025 12: 00', 'timeout': 43
        },
        {
          'start_time': '1/9/2025 13: 00', 'timeout': 29
        },
        {
          'start_time': '1/9/2025 14: 00', 'timeout': 76
        },
        {
          'start_time': '1/9/2025 15: 00', 'timeout': 29
        },
        {
          'start_time': '1/9/2025 16: 00', 'timeout': 49
        },
        {
          'start_time': '1/9/2025 17: 00', 'timeout': 32
        },
        {
          'start_time': '1/9/2025 18: 00', 'timeout': 48
        }
      ]

      const chartData3 = [
        {
          'start_time': '1/8/2025 15: 00', 'ram_usage': 13
        },
        {
          'start_time': '1/8/2025 16: 00', 'ram_usage': 13
        },
        {
          'start_time': '1/8/2025 17: 00', 'ram_usage': 15
        },
        {
          'start_time': '1/8/2025 18: 00', 'ram_usage': 18
        },
        {
          'start_time': '1/8/2025 19: 00', 'ram_usage': 13
        },
        {
          'start_time': '1/8/2025 20: 00', 'ram_usage': 10
        },
        {
          'start_time': '1/8/2025 21: 00', 'ram_usage': 15
        },
        {
          'start_time': '1/8/2025 22: 00', 'ram_usage': 12
        },
        {
          'start_time': '1/8/2025 23: 00', 'ram_usage': 15
        },
        {
          'start_time': '1/9/2025 0: 00', 'ram_usage': 6
        },
        {
          'start_time': '1/9/2025 1: 00', 'ram_usage': 19
        },
        {
          'start_time': '1/9/2025 2: 00', 'ram_usage': 8
        },
        {
          'start_time': '1/9/2025 3: 00', 'ram_usage': 18
        },
        {
          'start_time': '1/9/2025 4: 00', 'ram_usage': 10
        },
        {
          'start_time': '1/9/2025 5: 00', 'ram_usage': 13
        },
        {
          'start_time': '1/9/2025 6: 00', 'ram_usage': 17
        },
        {
          'start_time': '1/9/2025 7: 00', 'ram_usage': 13
        },
        {
          'start_time': '1/9/2025 8: 00', 'ram_usage': 6
        },
        {
          'start_time': '1/9/2025 9: 00', 'ram_usage': 11
        },
        {
          'start_time': '1/9/2025 10: 00', 'ram_usage': 4
        },
        {
          'start_time': '1/9/2025 11: 00', 'ram_usage': 8
        },
        {
          'start_time': '1/9/2025 12: 00', 'ram_usage': 7
        },
        {
          'start_time': '1/9/2025 13: 00', 'ram_usage': 2
        },
        {
          'start_time': '1/9/2025 14: 00', 'ram_usage': 11
        },
        {
          'start_time': '1/9/2025 15: 00', 'ram_usage': 7
        },
        {
          'start_time': '1/9/2025 16: 00', 'ram_usage': 19
        },
        {
          'start_time': '1/9/2025 17: 00', 'ram_usage': 11
        },
        {
          'start_time': '1/9/2025 18: 00', 'ram_usage': 8
        }
      ]

      const chartData4 = [
        {
          'start_time': '1/8/2025 15: 00', 'cpu_usage': 56
        },
        {
          'start_time': '1/8/2025 16: 00', 'cpu_usage': 5
        },
        {
          'start_time': '1/8/2025 17: 00', 'cpu_usage': 28
        },
        {
          'start_time': '1/8/2025 18: 00', 'cpu_usage': 52
        },
        {
          'start_time': '1/8/2025 19: 00', 'cpu_usage': 78
        },
        {
          'start_time': '1/8/2025 20: 00', 'cpu_usage': 54
        },
        {
          'start_time': '1/8/2025 21: 00', 'cpu_usage': 17
        },
        {
          'start_time': '1/8/2025 22: 00', 'cpu_usage': 51
        },
        {
          'start_time': '1/8/2025 23: 00', 'cpu_usage': 54
        },
        {
          'start_time': '1/9/2025 0: 00', 'cpu_usage': 64
        },
        {
          'start_time': '1/9/2025 1: 00', 'cpu_usage': 46
        },
        {
          'start_time': '1/9/2025 2: 00', 'cpu_usage': 32
        },
        {
          'start_time': '1/9/2025 3: 00', 'cpu_usage': 21
        },
        {
          'start_time': '1/9/2025 4: 00', 'cpu_usage': 71
        },
        {
          'start_time': '1/9/2025 5: 00', 'cpu_usage': 63
        },
        {
          'start_time': '1/9/2025 6: 00', 'cpu_usage': 43
        },
        {
          'start_time': '1/9/2025 7: 00', 'cpu_usage': 19
        },
        {
          'start_time': '1/9/2025 8: 00', 'cpu_usage': 28
        },
        {
          'start_time': '1/9/2025 9: 00', 'cpu_usage': 20
        },
        {
          'start_time': '1/9/2025 10: 00', 'cpu_usage': 77
        },
        {
          'start_time': '1/9/2025 11: 00', 'cpu_usage': 66
        },
        {
          'start_time': '1/9/2025 12: 00', 'cpu_usage': 9
        },
        {
          'start_time': '1/9/2025 13: 00', 'cpu_usage': 37
        },
        {
          'start_time': '1/9/2025 14: 00', 'cpu_usage': 5
        },
        {
          'start_time': '1/9/2025 15: 00', 'cpu_usage': 5
        },
        {
          'start_time': '1/9/2025 16: 00', 'cpu_usage': 15
        },
        {
          'start_time': '1/9/2025 17: 00', 'cpu_usage': 18
        },
        {
          'start_time': '1/9/2025 18: 00', 'cpu_usage': 40
        }
      ]

      function createAmcharts() {

        function createFirstGraph(containerId, sampleData) {

          am5.ready(function () {
            // Create root element
            var root = am5.Root.new(containerId);

            // Set themes
            root.setThemes([am5themes_Animated.new(root)]);

            // Generate chart data from sampleData
            var data = sampleData.map(function (entry) {
              return {
                date: new Date(entry.start_time).getTime(), // Convert start_time to Date object (in milliseconds)
                value: entry.cost
              };
            });

            // Create chart
            var chart = root.container.children.push(am5xy.XYChart.new(root, {
              // focusable: true,
              panX: true,
              panY: true,
              wheelX: "panX",
              wheelY: "zoomX",
              pinchZoomX: true,
              paddingLeft: 0
            }));

            // Create axes
            var xAxis = chart.xAxes.push(am5xy.DateAxis.new(root, {
              maxDeviation: 0.5,
              groupData: false,
              extraMax: 0.1,
              extraMin: -0.1,
              baseInterval: {
                timeUnit: "hour",
                count: 1
              },
              dateFormats: {
                hour: "HH:mm"
              },
              periodChangeDateFormats: {
                hour: "MMM d, HH:mm"
              },
              renderer: am5xy.AxisRendererX.new(root, {
                // minorGridEnabled: true,
                minGridDistance: 30
              }),
              tooltip: am5.Tooltip.new(root, {})
            }));

            var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
              renderer: am5xy.AxisRendererY.new(root, {
                minGridDistance: 50 // Adjusts the spacing between grid lines
              }),
              min: 0,                // Ensures the Y-axis starts at 0
              maxPrecision: 0,       // Ensures no decimal values on the Y-axis
              step: 5                // Sets the step increment to 5
            }));

            // Create AxisRange for the red and bold line at Y=5
            var axisRange = yAxis.createAxisRange(yAxis.makeDataItem({
              value: 5,
              endValue: 5
            }));

            // Customize the appearance of the AxisRange (the bold red line)
            axisRange.get("grid").setAll({
              stroke: am5.color(0xff0000), // Set grid line color to red
              strokeWidth: 2,
              strokeOpacity: 1
            });

            // Add series
            var series = chart.series.push(am5xy.LineSeries.new(root, {
              name: "Cost Series",
              xAxis: xAxis,
              yAxis: yAxis,
              valueYField: "value",
              valueXField: "date",
              strokeWidth: 2,
              tooltip: am5.Tooltip.new(root, {
                pointerOrientation: "horizontal",
                labelText: "{valueY}"
              })
            }));           


            // Add bullets and annotations for values exceeding the Y-axis threshold (5)
            series.bullets.push(function (root, series, dataItem) {
              var container = am5.Container.new(root, {});

              // Default bullet
              container.children.push(am5.Circle.new(root, {
                radius: 4,
                fill: am5.color(0x4a90e2)
              }));

              // Add annotation for values exceeding the threshold
              if (dataItem.dataContext.value > 5) {
                // Red circle to indicate exceeded point
                container.children.push(am5.Circle.new(root, {
                  radius: 6,
                  fill: am5.color(0xff0000)
                }));

                // Add a label for the annotation
                container.children.push(am5.Label.new(root, {
                  text: "Budget Exceed at\n" + new Date(dataItem.dataContext.date).toLocaleString(),
                  x: 15,  // Offset for label
                  y: -10, // Offset for label
                  fill: am5.color(0x000000), // Black text
                  fontSize: 12,
                  fontWeight: "bold",
                  textAlign: "center"
                }));
              }

              return am5.Bullet.new(root, {
                locationX: undefined,
                sprite: container
              });
            });

            // Set initial data to the series
            series.data.setAll(data);

            // Add cursor
            var cursor = chart.set("cursor", am5xy.XYCursor.new(root, {
              xAxis: xAxis
            }));
            cursor.lineY.set("visible", false);

            // Make stuff animate on load
            chart.appear(1000, 100);
          }); // end am5.ready()
          insertTelemetry(EVENT_SOURCE_SPECTRA, AGENT_ORCHESTRATION_LOAD_GENAI_GRAPH , "Gen AI Graph loaded successfully", JSON.stringify({ "Chart Data": sampleData  }));

        }

        function createSecondGraph(containerId, sampleData) {
          am5.ready(function () {
            // Create root element
            var root = am5.Root.new(containerId);

            // Set theme
            root.setThemes([am5themes_Animated.new(root)]);

            // Create chart
            var chart = root.container.children.push(
              am5xy.XYChart.new(root, {
                panX: true,
                panY: false,
                wheelX: "panX",
                wheelY: "zoomX",
              })
            );

            // Create axes
            var xAxis = chart.xAxes.push(am5xy.DateAxis.new(root, {
              maxDeviation: 0.5,
              groupData: false,
              extraMax: 0.1,
              extraMin: -0.1,
              baseInterval: {
                timeUnit: "hour",
                count: 1
              },
              dateFormats: {
                hour: "MMM d, HH:mm"
              },
              periodChangeDateFormats: {
                hour: "MMM d, HH:mm"
              },
              renderer: am5xy.AxisRendererX.new(root, {
                minorGridEnabled: true,
                minGridDistance: 50
              }),
              tooltip: am5.Tooltip.new(root, {})
            }));

            var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
              renderer: am5xy.AxisRendererY.new(root, {
                minGridDistance: 50 // Adjusts the spacing between grid lines
              }),
              min: 0,                // Ensures the Y-axis starts at 0
              maxPrecision: 0,       // Ensures no decimal values on the Y-axis
              step: 5                // Sets the step increment to 5
            }));

            // Create series for RAM usage
            var ramSeries = chart.series.push(
              am5xy.LineSeries.new(root, {
                name: "RAM Usage",
                xAxis: xAxis,
                yAxis: yAxis,
                valueYField: "ram_usage",
                valueXField: "start_time",
                tooltip: am5.Tooltip.new(root, {
                  labelText: "{name}: {valueY}",
                }),
              })
            );
            ramSeries.strokes.template.setAll({ stroke: am5.color("#0000FF"), strokeWidth: 2 });
            ramSeries.bullets.push(function (root, series, dataItem) {
              return am5.Bullet.new(root, {
                sprite: am5.Circle.new(root, {
                  radius: 5,
                  fill: am5.color("#0000FF"), // Blue bullets for RAM Usage
                }),
              });
            });

            var axisRange_1 = yAxis.createAxisRange(yAxis.makeDataItem({
              value: 60,
              endValue: 60
            }));

            // Customize the appearance of the AxisRange (the bold red line)
            axisRange_1.get("grid").setAll({
              stroke: am5.color(0xff0000), // Set grid line color to red
              strokeWidth: 2,
              strokeOpacity: 1
            });
            // Add custom annotations or tooltips for values exceeding the threshold of 60
            ramSeries.bullets.push(function (root, serramSeriesies, dataItem) {
              var dataValue = dataItem.dataContext.value;
              if (dataValue > 60) {  // Only add annotations for values exceeding 60
                var annotation = am5.Container.new(root, {});

                // Red circle to indicate breached point
                var circle = annotation.children.push(am5.Circle.new(root, {
                  radius: 6,
                  fill: am5.color(0xff0000)  // Red circle
                }));

                // Label with black text to indicate threshold breach
                var label = annotation.children.push(am5.Label.new(root, {
                  text: "Budget Exceed\n" + new Date(dataItem.dataContext.date).toLocaleString(),
                  x: 15,  // offset for label
                  y: -10, // offset for label
                  fill: am5.color(0x000000),  // Black text
                  fontSize: 12,
                  fontWeight: "bold",
                  textAlign: "center"
                }));

                return am5.Bullet.new(root, {
                  locationX: dataItem.locationX,
                  locationY: dataItem.locationY,
                  sprite: annotation
                });
              }
            });

            // Create series for CPU usage
            var cpuSeries = chart.series.push(
              am5xy.LineSeries.new(root, {
                name: "CPU Usage",
                xAxis: xAxis,
                yAxis: yAxis,
                valueYField: "cpu_usage",
                valueXField: "start_time",
                tooltip: am5.Tooltip.new(root, {
                  labelText: "{name}: {valueY}",
                }),
              })
            );
            cpuSeries.strokes.template.setAll({ stroke: am5.color("#87CEEB"), strokeWidth: 2 });
            cpuSeries.bullets.push(function (root, series, dataItem) {
              return am5.Bullet.new(root, {
                sprite: am5.Circle.new(root, {
                  radius: 5,
                  fill: am5.color("#87CEEB"), // Light blue bullets for CPU Usage
                }),
              });
            });

            var axisRange_2 = yAxis.createAxisRange(yAxis.makeDataItem({
              value: 15,
              endValue: 15
            }));

            // Customize the appearance of the AxisRange (the bold red line)
            axisRange_2.get("grid").setAll({
              stroke: am5.color(0x808080), // Set grid line color to red
              strokeWidth: 2,
              strokeOpacity: 1
            });

            // Data
            var rawData = [
              { start_time: new Date("1/8/2025 15:00").getTime(), ram_usage: 13, cpu_usage: 56 },
              { start_time: new Date("1/8/2025 16:00").getTime(), ram_usage: 13, cpu_usage: 5 },
              { start_time: new Date("1/8/2025 17:00").getTime(), ram_usage: 15, cpu_usage: 28 },
              { start_time: new Date("1/8/2025 18:00").getTime(), ram_usage: 18, cpu_usage: 52 },
              { start_time: new Date("1/8/2025 19:00").getTime(), ram_usage: 13, cpu_usage: 78 },
              { start_time: new Date("1/8/2025 20:00").getTime(), ram_usage: 10, cpu_usage: 54 },
              { start_time: new Date("1/8/2025 21:00").getTime(), ram_usage: 15, cpu_usage: 17 },
              { start_time: new Date("1/8/2025 22:00").getTime(), ram_usage: 12, cpu_usage: 51 },
              { start_time: new Date("1/8/2025 23:00").getTime(), ram_usage: 15, cpu_usage: 54 },
              { start_time: new Date("1/9/2025 0:00").getTime(), ram_usage: 6, cpu_usage: 64 },
              { start_time: new Date("1/9/2025 1:00").getTime(), ram_usage: 19, cpu_usage: 46 },
              { start_time: new Date("1/9/2025 2:00").getTime(), ram_usage: 10, cpu_usage: 38 },
              { start_time: new Date("1/9/2025 3:00").getTime(), ram_usage: 12, cpu_usage: 61 },
            ];

            ramSeries.data.setAll(rawData);
            cpuSeries.data.setAll(rawData);

            // Add legend
            var legend = chart.children.push(am5.Legend.new(root, {}));
            legend.data.setAll([ramSeries, cpuSeries]);

            // Add cursor
            var cursor = chart.set("cursor", am5xy.XYCursor.new(root, {
              xAxis: xAxis
            }));
            cursor.lineY.set("visible", false);

            // Make stuff animate on load
            chart.appear(1000, 100);
          }); // end am5.ready()
          insertTelemetry(EVENT_SOURCE_SPECTRA, AGENT_ORCHESTRATION_LOAD_RAM_GRAPH , "RAM Graph loaded successfully", JSON.stringify({ "Chart Data": sampleData  }));

        }

        // function createThirdGraph(containerId, sampleData) {
        //   am5.ready(function () {
        //     // Create root element
        //     var root = am5.Root.new(containerId);

        //     // Set themes
        //     root.setThemes([
        //       am5themes_Animated.new(root)
        //     ]);

        //     // Generate chart data from chartData3
        //     var data = chartData3.map(function (entry) {
        //       return {
        //         date: new Date(entry.start_time).getTime(), // Convert start_time to Date object (in milliseconds)
        //         value: entry.ram_usage // Using 'ram_usage' field instead of 'timeout'
        //       };
        //     });

        //     // Create chart
        //     var chart = root.container.children.push(am5xy.XYChart.new(root, {
        //       focusable: true,
        //       panX: true,
        //       panY: true,
        //       wheelX: "panX",
        //       wheelY: "zoomX",
        //       pinchZoomX: true,
        //       paddingLeft: 0
        //     }));

        //     // Create axes
        //     var xAxis = chart.xAxes.push(am5xy.DateAxis.new(root, {
        //       maxDeviation: 0.5,
        //       groupData: false,
        //       extraMax: 0.1,
        //       extraMin: -0.1,
        //       baseInterval: {
        //         timeUnit: "hour",
        //         count: 1
        //       },
        //       dateFormats: {
        //         hour: "MMM d, HH:mm"
        //       },
        //       periodChangeDateFormats: {
        //         hour: "MMM d, HH:mm"
        //       },
        //       renderer: am5xy.AxisRendererX.new(root, {
        //         minorGridEnabled: true,
        //         minGridDistance: 70
        //       }),
        //       tooltip: am5.Tooltip.new(root, {})
        //     }));

        //     var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
        //       renderer: am5xy.AxisRendererY.new(root, {
        //         minGridDistance: 50 // Adjusts the spacing between grid lines
        //       }),
        //       min: 0,                // Ensures the Y-axis starts at 0
        //       maxPrecision: 0,       // Ensures no decimal values on the Y-axis
        //       step: 5                // Sets the step increment to 5
        //     }));

        //     // Create AxisRange for the red and bold line at Y=5
        //     var axisRange = yAxis.createAxisRange(yAxis.makeDataItem({
        //       value: 16,
        //       endValue: 5
        //     }));

        //     // Customize the appearance of the AxisRange (the bold red line)
        //     axisRange.get("grid").setAll({
        //       stroke: am5.color(0xff0000), // Set grid line color to red
        //       strokeWidth: 2,
        //       strokeOpacity: 1
        //     });

        //     // Add series
        //     var series = chart.series.push(am5xy.LineSeries.new(root, {
        //       name: "RAM Usage Series", // Updated name to reflect new data context
        //       xAxis: xAxis,
        //       yAxis: yAxis,
        //       valueYField: "value",
        //       valueXField: "date",
        //       stroke: am5.color(0x4a90e2),
        //       strokeWidth: 2,
        //       tooltip: am5.Tooltip.new(root, {
        //         pointerOrientation: "horizontal",
        //         labelText: "{valueY}"
        //       })
        //     }));

        //     // Add bullet to highlight the points
        //     series.bullets.push(function (root, series, dataItem) {
        //       var container = am5.Container.new(root, {});
        //       var circle = container.children.push(am5.Circle.new(root, {
        //         radius: 4,
        //         fill: am5.color(0x4a90e2)
        //       }));

        //       return am5.Bullet.new(root, {
        //         locationX: undefined,
        //         sprite: container
        //       });
        //     });

        //     // Set initial data to the series
        //     series.data.setAll(data);

        //     // Add cursor
        //     var cursor = chart.set("cursor", am5xy.XYCursor.new(root, {
        //       xAxis: xAxis
        //     }));
        //     cursor.lineY.set("visible", false);

        //     // Make stuff animate on load
        //     chart.appear(1000, 100);
        //   }); // end am5.ready()

        // }

        function createFourthGraph(containerId, sampleData) {
          am5.ready(function () {
            // Create root element
            var root = am5.Root.new(containerId);

            // Set themes
            root.setThemes([am5themes_Animated.new(root)]);

            // Generate chart data from chartData4
            var data = chartData4.map(function (entry) {
              return {
                date: new Date(entry.start_time).getTime(), // Convert start_time to Date object (in milliseconds)
                value: entry.cpu_usage // Using 'cpu_usage' field instead of 'ram_usage'
              };
            });

            // Create chart
            var chart = root.container.children.push(am5xy.XYChart.new(root, {
              focusable: true,
              panX: true,
              panY: true,
              wheelX: "panX",
              wheelY: "zoomX",
              pinchZoomX: true,
              paddingLeft: 0
            }));

            // Create axes
            var xAxis = chart.xAxes.push(am5xy.DateAxis.new(root, {
              maxDeviation: 0.5,
              groupData: false,
              extraMax: 0.1,
              extraMin: -0.1,
              baseInterval: {
                timeUnit: "hour",
                count: 1
              },
              dateFormats: {
                hour: "MMM d, HH:mm"
              },
              periodChangeDateFormats: {
                hour: "MMM d, HH:mm"
              },
              renderer: am5xy.AxisRendererX.new(root, {
                minorGridEnabled: true,
                minGridDistance: 70
              }),
              tooltip: am5.Tooltip.new(root, {})
            }));

            var yAxis = chart.yAxes.push(am5xy.ValueAxis.new(root, {
              renderer: am5xy.AxisRendererY.new(root, {
                minGridDistance: 50 // Adjusts the spacing between grid lines
              }),
              min: 0,                // Ensures the Y-axis starts at 0
              maxPrecision: 0,       // Ensures no decimal values on the Y-axis
              step: 5                // Sets the step increment to 5
            }));

            // Create AxisRange for the red and bold line at Y=60 (Threshold)
            var axisRange = yAxis.createAxisRange(yAxis.makeDataItem({
              value: 60,
              endValue: 60
            }));

            // Customize the appearance of the AxisRange (the bold red line)
            axisRange.get("grid").setAll({
              stroke: am5.color(0xff0000), // Set grid line color to red
              strokeWidth: 2,
              strokeOpacity: 1
            });

            // Add series
            var series = chart.series.push(am5xy.LineSeries.new(root, {
              name: "CPU Usage Series", // Updated name to reflect new data context
              xAxis: xAxis,
              yAxis: yAxis,
              valueYField: "value",
              valueXField: "date",
              stroke: am5.color(0x4a90e2),
              strokeWidth: 2,
              tooltip: am5.Tooltip.new(root, {
                pointerOrientation: "horizontal",
                labelText: "{valueY}"
              })
            }));

            // Add bullet to highlight the points
            series.bullets.push(function (root, series, dataItem) {
              var container = am5.Container.new(root, {});
              var circle = container.children.push(am5.Circle.new(root, {
                radius: 4,
                fill: am5.color(0x4a90e2)
              }));

              return am5.Bullet.new(root, {
                locationX: undefined,
                sprite: container
              });
            });

            // Add custom annotations or tooltips for values exceeding the threshold of 60
            series.bullets.push(function (root, series, dataItem) {
              var dataValue = dataItem.dataContext.value;
              if (dataValue > 60) {  // Only add annotations for values exceeding 60
                var annotation = am5.Container.new(root, {});

                // Red circle to indicate breached point
                var circle = annotation.children.push(am5.Circle.new(root, {
                  radius: 6,
                  fill: am5.color(0xff0000)  // Red circle
                }));

                // Label with black text to indicate threshold breach
                var label = annotation.children.push(am5.Label.new(root, {
                  text: "Budget Exceed\n" + new Date(dataItem.dataContext.date).toLocaleString(),
                  x: 15,  // offset for label
                  y: -10, // offset for label
                  fill: am5.color(0x000000),  // Black text
                  fontSize: 12,
                  fontWeight: "bold",
                  textAlign: "center"
                }));

                return am5.Bullet.new(root, {
                  locationX: dataItem.locationX,
                  locationY: dataItem.locationY,
                  sprite: annotation
                });
              }
            });

            // Set initial data to the series
            series.data.setAll(data);

            // Add cursor
            var cursor = chart.set("cursor", am5xy.XYCursor.new(root, {
              xAxis: xAxis
            }));
            cursor.lineY.set("visible", false);

            // Make stuff animate on load
            chart.appear(1000, 100);
          }); // end am5.ready()
          insertTelemetry(EVENT_SOURCE_SPECTRA, AGENT_ORCHESTRATION_LOAD_AGENT_TRACKING_GRAPH , "Agent Tracking Graph loaded successfully", JSON.stringify({ "Chart Data": sampleData  }));

        }

        createFirstGraph("amChartContainer1", chartData1)
        createSecondGraph("amChartContainer2", chartData2)
        // createThirdGraph("amChartContainer3", chartData3)
        createFourthGraph("amChartContainer4", chartData4)
      }

return nodes
    }


    // function createImage() {
    //   // Define the image links
    //   const image_link1 = "static/CDN/images/chartimage/cost.png";
    //   const image_link2 = "static/CDN/images/chartimage/timeout.png";
    //   const image_link3 = "static/CDN/images/chartimage/RAM.png";
    //   const image_link4 = "static/CDN/images/chartimage/cpu.png";

    //   // Get references to the containers
    //   const c1 = document.getElementById('amChartContainer1');
    //   const c2 = document.getElementById('amChartContainer2');
    //   const c3 = document.getElementById('amChartContainer3');
    //   const c4 = document.getElementById('amChartContainer4');

    //   // Create an image element and set the source for each container
    //   function addImagesToContainers() {
    //     const containers = [c1, c2, c3, c4];
    //     const imageLinks = [image_link1, image_link2, image_link3, image_link4];

    //     // Loop through each container and image link
    //     for (let i = 0; i < containers.length; i++) {
    //       const img = document.createElement('img');
    //       img.src = imageLinks[i];  // Set the image source from the array
    //       img.alt = `Image ${i + 1}`; // Optional: descriptive alt text for accessibility
    //       img.style.width = '100%';  // Make the image fill the container width
    //       img.style.height = '100%'; // Make the image fill the container height
    //       containers[i].innerHTML = '';  // Clear any previous content
    //       containers[i].appendChild(img);  // Append the new image
    //     }
    //   }

    //   // Call the function to add images to the containers
    //   addImagesToContainers();
    // }

    window.addEventListener("load", () => {
      // var node
      (async () => {
  var node=await draw();;
   console.log(node)
insertTelemetry(EVENT_SOURCE_SPECTRA, AGENT_ORCHESTRATION_LOAD_CHART, "Orchestration Chart loaded successfully", JSON.stringify({ "Nodes": node  }));

})();



    });



  </script>
</body>
{% endblock %}